<link rel="import" href="../../../../bower_components/iron-flex-layout/iron-flex-layout.html" />

<dom-module id="sa-profile">
    <style>
        .profile {
            border-radius: 2px;
            height: 100%;
            padding: 16px 0 16px 0;
            width: calc(98.66% - 16px);
            margin: 16px auto;
            background: white;
        }

        .title {
            font-size: 34px;
        }

        iron-image{
            width:25%;
            height:25%;
        }

    </style>
    <template>

        <paper-material class="profile flex-container" elevation="1">
            <div>
                <span class="title">{{user.firstName}}</span>
                <span class="title flex">{{user.lastName}}</span>
                <span class="flex"></span>
                <span>{{user.agentID}}</span>
            </div>
            <div>
                <iron-image src="../../images/logo/Img-03.png"></iron-image>
            </div>

        </paper-material>

        <iron-ajax id="profile-ajax"
                   url="{{ajax_url}}"
                   params="{{ajax_params}}"
                   handle-as="json"
                   method="GET"
                   last-response="{{user}}">
        </iron-ajax>

    </template>

    <script>
        (function () {
            Polymer({
                is: 'sa-profile',
                properties: {
                    user: {
                        type: Object,
                    },
                    notification: {
                        type: Boolean,
                        notify: true,
                        observer: 'handleNotification'
                    }
                },
                ready: function () {
                },
                handleNotification: function () {
                    if (this.notification === 'profile') {
                        this.ajax_url = '/users/' + window.sessionStorage['id'];
                        this.ajax_params = { 'access_token': window.sessionStorage.token };
                        document.getElementById('profile-ajax').generateRequest();
                    }
                }
            });
        })();
    </script>
</dom-module>
