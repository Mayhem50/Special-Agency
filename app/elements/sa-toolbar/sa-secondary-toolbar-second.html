
<dom-module id="sa-secondary-toolbar-second">
    <style>
        :host {
            display: flex;
            width: 100%;
            align-items: center;
            height: 50px;
            margin: 0;
            background-color: #383838;
        }        

        #toolbar-image {
            flex: 0 0 60px;
            order: 2;
            height:100%
        }

        #toolbar-text {
            display: flex;
            color: #d9d9d9;
            background-color: #383838;
            order: 3;
            padding:0 25px;
            align-items: center;
            font-size: 24px;
            flex-shrink: 0;
            height:100%;
        }

        #toolbar-button {
            display: flex;
            flex: 0 0 50px;
            order: 1;
            height: 100%;
            justify-content: flex-start;
            align-items: center;
            color: #686868;
            background-color: #383838;
            cursor:pointer;
        }

            #toolbar-button > iron-icon {
                padding: 0;
                width:40px;
                height:100%;
            }

        #toolbar-deco {
            flex: 0 0 40px;
            order: 6;
            height: 100%;
        }

        #toolbar-dummy{
            flex:1 0 150px;
            order:5;
            align-self:stretch;
        }
    </style>

    <template>
            <div id="toolbar-button" on-tap="_backToKinds"><iron-icon icon="chevron-left"></iron-icon></div>
            <div id="toolbar-image">&nbsp;</div>
            <div id="toolbar-text">
                <span>[[kind.name.en]]</span>
            </div>
            <div id="toolbar-dummy">&nbsp;</div>
            <div id="toolbar-deco">&nbsp;</div>
            
    </template>

    <script>
        (function () {
            Polymer({
                is: 'sa-secondary-toolbar-second',

                properties: {
                    kind: {
                        type: Object,
                        observer: '_updateContent'
                    },
                    createMission: {
                        type: Boolean,
                        observer: '_updateContent'
                    }
                },
                _updateContent: function () {
                    this._changeColor();

                    if (!this.kind) { return; }

                    div = this.querySelector('#toolbar-image');
                    if (div == null) { return; }
                    div.style.backgroundImage = 'url(../../images/kinds/' + this.kind.image.path + ')';
                    div.style.backgroundPosition = this.kind.image.toolbarXOffset + ' ' + this.kind.image.toolbarYOffset;
                    div.style.backgroundSize = this.kind.image.toolbarScale;

                },
                _backToKinds: function (e) {
                    this.fire('back-to-previous-page');
                },
                _changeColor: function () {
                    var color;
                    var div;

                    if (this.createMission) {
                        color = "#339933";

                        div = this.querySelector('#toolbar-dummy');
                        if (div)
                            div.style.background = color;
                    }
                    else {
                        if(this.kind)
                            color = this.kind.color;

                        div = this.querySelector('#toolbar-dummy');
                        if (div)
                            div.style.background = "rgba(0, 0, 0, 0)";
                    }

                    div = this.querySelector('#toolbar-deco');
                    if (div == null) { return; }
                    div.style.background = color;

                    div = this.querySelector('#toolbar-text');
                    if (div == null) { return; }
                    div.style.background = color;
                }
            });
        })();
    </script>
</dom-module>
