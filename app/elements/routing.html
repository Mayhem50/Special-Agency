<script src="../../bower_components/page/page.js"></script>
<script>
    window.addEventListener('WebComponentsReady', function () {
        page('/', function () {
            app.route = isAuthenticated('home');
        });

        page('/login', function () {
            app.route = 'login';
        });

        page('/profile/:name', function (data) {
            app.route = isAuthenticated('profile');
            app.params = data.params;
        });

        page('/users', function () {
            app.route = 'users';
        });

        page('/users/:name', function (data) {
            app.route = 'user-info';
            app.params = data.params;
        });

        page('/contact', function () {
            app.route = 'contact';
        });

        // add #! before urls
        page({
            hashbang: true
        });

        function isAuthenticated(route)
        {
            var token;
            if (window.localStorage['remember'] == "true") {
                token = window.localStorage.token;
            }
            else {
                token = window.sessionStorage.token;
            }

            if (token == '' || typeof token == "undefined")
                return 'login';
            else
                return route;
        }
    });
</script>
