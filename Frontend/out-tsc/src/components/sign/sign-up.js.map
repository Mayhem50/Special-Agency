{"version":3,"file":"sign-up.js","sourceRoot":"","sources":["../../../../src/components/sign/sign-up.ts"],"names":[],"mappings":"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","sourcesContent":["import { LitElement, html, css, property } from 'lit-element';\nimport '@material/mwc-textfield';\nimport '@material/mwc-button';\nimport '@material/mwc-icon-button';\nimport '@material/mwc-circular-progress';\nimport ApiResources from '../../services/api-resources';\nimport CommonStyles from '../../styles/common';\nimport Styles from './styles';\n\nclass SignUp extends LitElement {\n  @property({ type: String, attribute: false }) email = 'regnier.ben@gmail.com';\n  @property({ type: String, attribute: false }) password = 'x';\n  @property({ type: String, attribute: false }) confirmPassword = 'x';\n  @property({ type: String, attribute: false }) firstName = 'b';\n  @property({ type: String, attribute: false }) lastName = 'c';\n  @property({ type: Boolean, attribute: false }) loading = false;\n  @property({ type: Boolean, attribute: false }) success = false;\n  @property({ type: String, attribute: false }) error = '';\n\n  static getStyles() {\n    return [\n      CommonStyles,\n      Styles,\n      css`\n        #success {\n          opacity: 0;\n          transition: 0.5s;\n          transition-delay: 0.5s;\n          position: fixed;\n          margin-top: 16px;\n        }\n\n        #success > div {\n          color: var(--text-primary-color);\n          margin-top: 8px;\n        }\n\n        #success[success] {\n          opacity: 1;\n          transition-delay: 0;\n        }\n\n        #username {\n          display: grid;\n          grid-template-columns: 49% 49%;\n          justify-content: space-between;\n        }\n\n        mwc-circular-progress {\n          margin-right: 8px;\n        }\n      `,\n    ];\n  }\n\n  private updateEmail(event: Event) {\n    this.email = (event.target as any).value;\n    console.log((event.target as any).value);\n  }\n\n  private updatePassword(event: Event) {\n    this.password = (event.target as any).value;\n    console.log((event.target as any).value);\n  }\n\n  private updateConfirmPassword(event: Event) {\n    this.confirmPassword = (event.target as any).value;\n    console.log((event.target as any).value);\n  }\n\n  private updateFirstName(event: Event) {\n    this.firstName = (event.target as any).value;\n    console.log((event.target as any).value);\n  }\n\n  private updateLastName(event: Event) {\n    this.lastName = (event.target as any).value;\n    console.log((event.target as any).value);\n  }\n\n  private isButtonDisabled() {\n    return (\n      !this.email ||\n      !this.password ||\n      this.password !== this.confirmPassword ||\n      !this.firstName ||\n      !this.lastName ||\n      this.loading\n    );\n  }\n\n  private async sign() {\n    try {\n      this.loading = true;\n      this.error = '';\n      const data = await ApiResources.fetch(ApiResources.SIGNUP, {\n        credential: { email: this.email, password: this.password },\n        user: {\n          firstName: this.firstName,\n          lastName: this.lastName,\n        },\n      });\n      console.log(JSON.stringify(data));\n      setTimeout(() => {\n        this.dispatchEvent(\n          new CustomEvent('on-success', {\n            detail: true,\n          })\n        );\n      }, 3000);\n      this.success = true;\n    } catch (error) {\n      this.error = error.message;\n    } finally {\n      this.loading = false;\n    }\n  }\n\n  private async signGoogle() {\n    try {\n      ApiResources.fetch(ApiResources.SIGNUP_GOOGLE);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  render() {\n    return html`\n      <h3>Inscription</h3>\n      <div id=\"success\" ?success=\"${this.success}\">\n        <img src=\"assets/images/logo/Img-02.png\" />\n        <div>Félicitations, vous faites maintenant partie de l'Agence</div>\n      </div>\n\n      <div id=\"social-button-container\">\n        <mwc-icon-button twitter>\n          <iron-icon icon=\"vaadin:twitter\"></iron-icon>\n        </mwc-icon-button>\n        <mwc-icon-button facebook>\n          <iron-icon icon=\"vaadin:facebook\"></iron-icon>\n        </mwc-icon-button>\n\n        <mwc-icon-button google @click=\"${this.signGoogle}\">\n          <img src=\"/assets/images/sign/google.svg\" />\n        </mwc-icon-button>\n      </div>\n\n      <div id=\"form\" ?success=\"${this.success}\">\n        <mwc-textfield\n          label=\"email\"\n          @change=\"${this.updateEmail}\"\n          value=\"${this.email}\"\n          autoValidate\n          pattern=\"${\"^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:.[a-zA-Z0-9-]+)*$\"}\"\n        ></mwc-textfield>\n\n        <div id=\"username\">\n          <mwc-textfield\n            label=\"prénom\"\n            @change=\"${this.updateFirstName}\"\n            value=\"${this.firstName}\"\n            autoValidate\n            pattern=\"${'.*[a-zA-Z]'}\"\n          ></mwc-textfield>\n          <mwc-textfield\n            label=\"nom\"\n            @change=\"${this.updateLastName}\"\n            value=\"${this.lastName}\"\n            autoValidate\n            pattern=\"${'.*[a-zA-Z]'}\"\n          ></mwc-textfield>\n        </div>\n\n        <mwc-textfield\n          label=\"mot de passe\"\n          type=\"password\"\n          @change=\"${this.updatePassword}\"\n          value=\"${this.password}\"\n          autoValidate\n        ></mwc-textfield>\n\n        <mwc-textfield\n          id=\"confirm-password\"\n          label=\"confirmer mot de passe\"\n          type=\"password\"\n          @change=\"${this.updateConfirmPassword}\"\n          validationMessage=\"Passwords are not same\"\n          value=\"${this.confirmPassword}\"\n          autoValidate\n          pattern=\"${this.password}\"\n        ></mwc-textfield>\n\n        <mwc-button\n          ?disabled=\"${this.isButtonDisabled()}\"\n          @click=\"${this.sign}\"\n        >\n          ${this.loading\n            ? html`\n                <mwc-circular-progress\n                  indeterminate\n                  density=\"${-6}\"\n                ></mwc-circular-progress>\n              `\n            : undefined}\n          S'inscrire</mwc-button\n        >\n\n        ${this.success ? html`<div></div>` : undefined}\n        <div class=\"error\">${this.error ? this.error : html`&nbsp;`}</div>\n      </div>\n    `;\n  }\n}\n\ncustomElements.define('sign-up', SignUp);\n"]}