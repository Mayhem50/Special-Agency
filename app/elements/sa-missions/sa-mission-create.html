<link rel="import" href="../../../bower_components/paper-input/paper-textarea.html" />
<link rel="import" href="../../../bower_components/paper-badge/paper-badge.html" />

<link rel="import" href="../sa-dates/sa-dates.html" />
<link rel="import" href="../sa-rank/sa-rank.html" />
<link rel="import" href="../date-picker/date-picker.html" />

<dom-module id="sa-mission-create">
    <style>
        :host{            
            --paper-input-container-input:{
                color:black;
            }
        }        
    </style>
    <template>            


        <iron-ajax id="titles-ajax"
                   url="[[_xhrURL]]"
                   content-type="application/json"
                   handle-as="json"
                   method="GET"
                   on-response="_handleResponse"
                   last-response="{{_xhrResponse}}">
        </iron-ajax>
    </template>

    <script>
        (function () {
            Polymer({
                is: 'sa-mission-create',

                properties: {
                    mission: {
                        type: Object,
                        notify: true,
                    },
                    kind: Object,
                    _titles: Object,
                    _xhrResponse: Object,
                    update: {
                        type: Boolean,
                        observer: '_updateChanged'
                    }
                },
                _handleResponse: function () {
                    if (!this._xhrResponse) { return; }

                    if (this._xhrResponse.success) {
                        this._titles = this._xhrResponse.types;
                    }
                },
                _updateChanged: function (e) {
                    if (this.update) {
                        this._xhrURL = 'types/' + this.kind._id;
                        this.$$('#titles-ajax').generateRequest();
                    }
                }
            });
        })();

    </script>
</dom-module>
